# NAT Gateway Deep Dive - How It Works and What It Bridges

## What NAT Gateway Bridges - Complete Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      GCP PROJECT                                                    â”‚
â”‚                                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                  VPC NETWORK                                                â”‚   â”‚
â”‚  â”‚                                                                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                           PRIVATE SUBNETS                                           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  SUBNET-A   â”‚  â”‚  SUBNET-B   â”‚  â”‚  SUBNET-C   â”‚  â”‚  SUBNET-D   â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ 10.1.0.0/24 â”‚  â”‚ 10.2.0.0/24 â”‚  â”‚ 10.3.0.0/24 â”‚  â”‚ 10.4.0.0/24 â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â”‚Web Serversâ”‚â”‚  â”‚â”‚App Serversâ”‚â”‚  â”‚â”‚Databases  â”‚â”‚  â”‚â”‚Analytics  â”‚â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â”‚10.1.0.10  â”‚â”‚  â”‚â”‚10.2.0.20  â”‚â”‚  â”‚â”‚10.3.0.30  â”‚â”‚  â”‚â”‚10.4.0.40  â”‚â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â”‚10.1.0.11  â”‚â”‚  â”‚â”‚10.2.0.21  â”‚â”‚  â”‚â”‚10.3.0.31  â”‚â”‚  â”‚â”‚10.4.0.41  â”‚â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â”‚GKE Nodes  â”‚â”‚  â”‚â”‚Functions  â”‚â”‚  â”‚â”‚ML Trainingâ”‚â”‚  â”‚â”‚Data Proc  â”‚â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â”‚10.1.0.50  â”‚â”‚  â”‚â”‚10.2.0.60  â”‚â”‚  â”‚â”‚10.3.0.70  â”‚â”‚  â”‚â”‚10.4.0.80  â”‚â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                            â”‚                                             â”‚   â”‚
â”‚  â”‚                                            â”‚ ALL OUTBOUND TRAFFIC                        â”‚   â”‚
â”‚  â”‚                                            â”‚                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                               CLOUD ROUTER                                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚   ROUTING   â”‚  â”‚    BGP      â”‚  â”‚  STATIC     â”‚  â”‚    NAT      â”‚               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚   TABLE     â”‚  â”‚  SESSIONS   â”‚  â”‚   ROUTES    â”‚  â”‚  GATEWAY    â”‚               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                NAT GATEWAY                                          â”‚
        â”‚                              (TRANSLATION HUB)                                     â”‚
        â”‚                                                                                     â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚  â”‚                       NAT TRANSLATION TABLE                                 â”‚   â”‚
        â”‚  â”‚                                                                             â”‚   â”‚
        â”‚  â”‚  PRIVATE IP:PORT     â†’    PUBLIC IP:PORT     â”‚    PROTOCOL    â”‚   STATE    â”‚   â”‚
        â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
        â”‚  â”‚  10.1.0.10:45231  â†’  35.202.123.45:12001   â”‚      TCP       â”‚ ESTABLISHEDâ”‚   â”‚
        â”‚  â”‚  10.2.0.20:33445  â†’  35.202.123.45:12002   â”‚      TCP       â”‚   SYN_SENT â”‚   â”‚
        â”‚  â”‚  10.3.0.30:51876  â†’  35.202.123.45:12003   â”‚      UDP       â”‚    ACTIVE  â”‚   â”‚
        â”‚  â”‚  10.4.0.40:28193  â†’  35.202.123.45:12004   â”‚     HTTPS      â”‚ ESTABLISHEDâ”‚   â”‚
        â”‚  â”‚  10.1.0.50:40821  â†’  35.202.123.45:12005   â”‚      HTTP      â”‚ ESTABLISHEDâ”‚   â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚                                     â”‚                                               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚  â”‚                          IP POOL MANAGEMENT                                 â”‚   â”‚
        â”‚  â”‚                                                                             â”‚   â”‚
        â”‚  â”‚  External IP Addresses:                                                     â”‚   â”‚
        â”‚  â”‚  â€¢ 35.202.123.45 (Primary)                                                 â”‚   â”‚
        â”‚  â”‚  â€¢ 35.202.123.46 (Secondary)                                               â”‚   â”‚
        â”‚  â”‚  â€¢ 35.202.123.47 (Auto-allocated)                                          â”‚   â”‚
        â”‚  â”‚                                                                             â”‚   â”‚
        â”‚  â”‚  Port Range: 1024-65535 (64,512 ports per IP)                              â”‚   â”‚
        â”‚  â”‚  Max Connections: 64,512 per VM per IP                                      â”‚   â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â”‚ OUTBOUND ONLY
                                                    â”‚
                                                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                   INTERNET                                          â”‚
        â”‚                                                                                     â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
        â”‚  â”‚   GOOGLE    â”‚  â”‚    APIS     â”‚  â”‚   GITHUB    â”‚  â”‚   DOCKER    â”‚              â”‚
        â”‚  â”‚   SERVICES  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚     HUB     â”‚              â”‚
        â”‚  â”‚             â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
        â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚Maps API â”‚ â”‚  â”‚ â”‚ Repos   â”‚ â”‚  â”‚ â”‚Containerâ”‚ â”‚              â”‚
        â”‚  â”‚ â”‚BigQuery â”‚ â”‚  â”‚ â”‚YouTube  â”‚ â”‚  â”‚ â”‚Packages â”‚ â”‚  â”‚ â”‚Images   â”‚ â”‚              â”‚
        â”‚  â”‚ â”‚Storage  â”‚ â”‚  â”‚ â”‚Gmail    â”‚ â”‚  â”‚ â”‚Actions  â”‚ â”‚  â”‚ â”‚Registry â”‚ â”‚              â”‚
        â”‚  â”‚ â”‚AI/ML    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
        â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                  â”‚
        â”‚                                                                                     â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
        â”‚  â”‚    CDNs     â”‚  â”‚  DATABASES  â”‚  â”‚  MONITORING â”‚  â”‚   PACKAGE   â”‚              â”‚
        â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚ REPOSITORIESâ”‚              â”‚
        â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
        â”‚  â”‚ â”‚Cloudflareâ”‚ â”‚  â”‚MongoDB   â”‚ â”‚  â”‚ â”‚DataDog  â”‚ â”‚  â”‚ â”‚npm      â”‚ â”‚              â”‚
        â”‚  â”‚ â”‚AWS CF   â”‚ â”‚  â”‚Atlas     â”‚ â”‚  â”‚ â”‚NewRelic â”‚ â”‚  â”‚ â”‚PyPI     â”‚ â”‚              â”‚
        â”‚  â”‚ â”‚Fastly   â”‚ â”‚  â”‚Redis     â”‚ â”‚  â”‚ â”‚Grafana  â”‚ â”‚  â”‚ â”‚Maven    â”‚ â”‚              â”‚
        â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## How NAT Gateway Works - Step by Step Process

### Step 1: Outbound Request Initiation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Private VM    â”‚                    â”‚  NAT Gateway    â”‚
â”‚                 â”‚                    â”‚                 â”‚
â”‚ Source: 10.1.0.10â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                 â”‚
â”‚ Dest: github.com â”‚   Original Packet  â”‚                 â”‚
â”‚ Port: 45231      â”‚                    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Original Packet:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SRC IP: 10.1.0.10  â”‚ DST IP: 140.82.112.3 (github.com)â”‚
â”‚ SRC PORT: 45231    â”‚ DST PORT: 443 (HTTPS)            â”‚
â”‚ PROTOCOL: TCP      â”‚ DATA: HTTP/TLS Request            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 2: NAT Translation Process
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    NAT TRANSLATION    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NAT Gateway   â”‚                       â”‚    Internet     â”‚
â”‚                 â”‚                       â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                 â”‚
â”‚ â”‚TRANSLATION  â”‚ â”‚   Modified Packet     â”‚                 â”‚
â”‚ â”‚   TABLE     â”‚ â”‚                       â”‚                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                       â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Translation Process:
1. Allocate external IP from pool: 35.202.123.45
2. Allocate external port: 12001
3. Create mapping entry in table
4. Modify packet headers

Modified Packet:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SRC IP: 35.202.123.45  â”‚ DST IP: 140.82.112.3         â”‚
â”‚ SRC PORT: 12001        â”‚ DST PORT: 443                â”‚
â”‚ PROTOCOL: TCP          â”‚ DATA: HTTP/TLS Request       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NAT Table Entry Created:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INTERNAL: 10.1.0.10:45231 â†” EXTERNAL: 35.202.123.45:12001â”‚
â”‚ STATE: ESTABLISHED        â”‚ TIMEOUT: 1800 seconds        â”‚
â”‚ PROTOCOL: TCP            â”‚ DIRECTION: OUTBOUND           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 3: Return Traffic Processing
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Internet     â”‚                       â”‚   NAT Gateway   â”‚
â”‚                 â”‚                       â”‚                 â”‚
â”‚                 â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                 â”‚    Response Packet    â”‚ â”‚  LOOKUP     â”‚ â”‚
â”‚                 â”‚                       â”‚ â”‚  TABLE      â”‚ â”‚
â”‚                 â”‚                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Incoming Response:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SRC IP: 140.82.112.3   â”‚ DST IP: 35.202.123.45        â”‚
â”‚ SRC PORT: 443          â”‚ DST PORT: 12001              â”‚
â”‚ PROTOCOL: TCP          â”‚ DATA: HTTP/TLS Response      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NAT Lookup & Translation:
1. Look up 35.202.123.45:12001 in translation table
2. Find mapping: 35.202.123.45:12001 â†’ 10.1.0.10:45231
3. Translate destination back to internal

Final Packet to VM:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SRC IP: 140.82.112.3   â”‚ DST IP: 10.1.0.10           â”‚
â”‚ SRC PORT: 443          â”‚ DST PORT: 45231             â”‚
â”‚ PROTOCOL: TCP          â”‚ DATA: HTTP/TLS Response     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## What Applications NAT Gateway Bridges

### 1. Development & DevOps Tools
```
Private VMs â”€â”€â”€â”€â”€â”€â–º NAT Gateway â”€â”€â”€â”€â”€â”€â–º Internet Services
                                        â”‚
                                        â”œâ”€â”€ GitHub (Code repos)
                                        â”œâ”€â”€ Docker Hub (Container images)
                                        â”œâ”€â”€ npm/PyPI (Package managers)
                                        â”œâ”€â”€ Maven Central (Java packages)
                                        â”œâ”€â”€ Terraform Registry
                                        â””â”€â”€ Helm Charts
```

### 2. External APIs & Services
```
Application Servers â”€â”€â”€â”€â”€â”€â–º NAT Gateway â”€â”€â”€â”€â”€â”€â–º External APIs
                                                â”‚
                                                â”œâ”€â”€ Payment Gateways (Stripe, PayPal)
                                                â”œâ”€â”€ Authentication (Auth0, Okta)
                                                â”œâ”€â”€ Communication (Twilio, SendGrid)
                                                â”œâ”€â”€ Maps & Location (Google Maps, Mapbox)
                                                â”œâ”€â”€ Weather APIs
                                                â””â”€â”€ Social Media APIs
```

### 3. Database & Storage Services
```
Backend Services â”€â”€â”€â”€â”€â”€â–º NAT Gateway â”€â”€â”€â”€â”€â”€â–º External Databases
                                             â”‚
                                             â”œâ”€â”€ MongoDB Atlas
                                             â”œâ”€â”€ AWS RDS (cross-cloud)
                                             â”œâ”€â”€ Redis Cloud
                                             â”œâ”€â”€ Elasticsearch Cloud
                                             â”œâ”€â”€ InfluxDB Cloud
                                             â””â”€â”€ Firebase
```

### 4. Monitoring & Observability
```
Infrastructure â”€â”€â”€â”€â”€â”€â–º NAT Gateway â”€â”€â”€â”€â”€â”€â–º Monitoring Services
                                           â”‚
                                           â”œâ”€â”€ DataDog
                                           â”œâ”€â”€ New Relic
                                           â”œâ”€â”€ Splunk Cloud
                                           â”œâ”€â”€ PagerDuty
                                           â”œâ”€â”€ Grafana Cloud
                                           â””â”€â”€ Sentry
```

### 5. Content Delivery & CDNs
```
Web Applications â”€â”€â”€â”€â”€â”€â–º NAT Gateway â”€â”€â”€â”€â”€â”€â–º CDN Services
                                             â”‚
                                             â”œâ”€â”€ Cloudflare
                                             â”œâ”€â”€ AWS CloudFront
                                             â”œâ”€â”€ Fastly
                                             â”œâ”€â”€ Azure CDN
                                             â””â”€â”€ KeyCDN
```

### 6. Security & Compliance
```
Security Tools â”€â”€â”€â”€â”€â”€â–º NAT Gateway â”€â”€â”€â”€â”€â”€â–º Security Services
                                           â”‚
                                           â”œâ”€â”€ Certificate Authorities
                                           â”œâ”€â”€ Vulnerability Scanners
                                           â”œâ”€â”€ Threat Intelligence
                                           â”œâ”€â”€ Compliance Checks
                                           â””â”€â”€ Security Updates
```

## NAT Gateway Configuration & Rules

### Port Allocation Rules
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PORT ALLOCATION                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Per VM Instance Limits:                                    â”‚
â”‚  â€¢ Minimum ports per VM: 64                                 â”‚
â”‚  â€¢ Maximum ports per VM: 65,536                             â”‚
â”‚  â€¢ Default ports per VM: 1,024                              â”‚
â”‚                                                             â”‚
â”‚  Per External IP Limits:                                    â”‚
â”‚  â€¢ Available ports: 1024-65535 (64,512 total)              â”‚
â”‚  â€¢ Reserved ports: 1-1023 (system ports)                   â”‚
â”‚  â€¢ Max VMs per external IP: 64 (with 1024 ports each)      â”‚
â”‚                                                             â”‚
â”‚  Connection Timeouts:                                       â”‚
â”‚  â€¢ TCP Established: 1800 seconds (30 minutes)              â”‚
â”‚  â€¢ TCP Transitory: 30 seconds                              â”‚
â”‚  â€¢ UDP: 30 seconds                                          â”‚
â”‚  â€¢ ICMP: 30 seconds                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### NAT Rules Configuration
```
NAT Gateway Rules:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Source Ranges (Which subnets can use NAT):                â”‚
â”‚  â€¢ 10.1.0.0/24 (Web servers subnet)                        â”‚
â”‚  â€¢ 10.2.0.0/24 (App servers subnet)                        â”‚
â”‚  â€¢ 10.3.0.0/24 (Database subnet)                           â”‚
â”‚  â€¢ 10.4.0.0/24 (Analytics subnet)                          â”‚
â”‚                                                             â”‚
â”‚  External IP Allocation:                                    â”‚
â”‚  â€¢ Auto-allocate: Let GCP assign IPs                       â”‚
â”‚  â€¢ Manual: Specify reserved external IPs                   â”‚
â”‚  â€¢ Hybrid: Mix of auto and manual                          â”‚
â”‚                                                             â”‚
â”‚  Logging Configuration:                                     â”‚
â”‚  â€¢ Translation logs: ON/OFF                                 â”‚
â”‚  â€¢ Error logs: ON/OFF                                       â”‚
â”‚  â€¢ Flow sampling: 0.1 - 1.0                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Benefits & Limitations

### âœ… What NAT Gateway Enables
- **Private VM internet access** without public IPs
- **Centralized outbound traffic** management
- **Automatic IP pool management**
- **Stateful connection tracking**
- **High availability** (managed service)
- **Scalable port allocation**

### âŒ What NAT Gateway Cannot Do
- **No inbound connections** from internet
- **No server hosting** for external clients
- **No load balancing** capabilities
- **No traffic filtering** (use firewalls)
- **No encryption** (just translation)
- **No cross-region routing**

### ğŸ’° Cost Considerations
- **Hourly charges** per NAT gateway
- **Data processing fees** per GB
- **External IP costs** for allocated IPs
- **No charges** for private IP communications